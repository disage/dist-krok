import React, { Component } from 'react';
import { NavLink } from 'react-router-dom';
import { connect } from 'react-redux';

import './Sidebar.scss';
import { logout } from '../../store/actions/auth';

class Sidebar extends Component {
  state = {
    email: null,
    firstName: null,
    lastName: null,
  };

  componentDidMount() {
    const user = this.props.user;
    this.logOut = this.logOut.bind(this);

    if (user) {
      this.setState({
        email: user.email,
        firstName: user.firstName,
        lastName: user.lastName,
      });
    }
  }

  logOut() {
    const { dispatch } = this.props;
    dispatch(logout());
  }

  render() {
    const { email, firstName, lastName } = this.state;

    return (
      <div className="sidebar">
        <nav>
          <svg
            className="logo"
            width="92"
            height="37"
            viewBox="0 0 92 37"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M10.1402 20.75L7.32023 23.69V29H2.49023V8H7.32023V17.81L16.6202 8H22.0202L13.3202 17.36L22.5302 29H16.8602L10.1402 20.75ZM38.0772 29L34.0272 23.15H33.7872H29.5572V29H24.6972V8H33.7872C35.6472 8 37.2572 8.31 38.6172 8.93C39.9972 9.55 41.0572 10.43 41.7972 11.57C42.5372 12.71 42.9072 14.06 42.9072 15.62C42.9072 17.18 42.5272 18.53 41.7672 19.67C41.0272 20.79 39.9672 21.65 38.5872 22.25L43.2972 29H38.0772ZM37.9872 15.62C37.9872 14.44 37.6072 13.54 36.8472 12.92C36.0872 12.28 34.9772 11.96 33.5172 11.96H29.5572V19.28H33.5172C34.9772 19.28 36.0872 18.96 36.8472 18.32C37.6072 17.68 37.9872 16.78 37.9872 15.62Z"
              fill="#575C69"
            />
            <path
              d="M76.65 20.75L73.83 23.69V29H69V8H73.83V17.81L83.13 8H88.53L79.83 17.36L89.04 29H83.37L76.65 20.75Z"
              fill="#575C69"
            />
            <circle cx="56" cy="19" r="9" stroke="#575C69" strokeWidth="4.5" fill="transparent" />
          </svg>

          <NavLink
            to="/"
            exact
            activeStyle={{
              background: 'white',
            }}>
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M19.4628 8.69904C19.4623 8.69858 19.4618 8.69812 19.4614 8.69766L11.3021 0.539551C10.9544 0.19165 10.492 0 10.0001 0C9.50828 0 9.04589 0.191498 8.69796 0.539398L0.542984 8.69339C0.540237 8.69614 0.53749 8.69904 0.534743 8.70178C-0.179441 9.42001 -0.17822 10.5853 0.538253 11.3017C0.865587 11.6292 1.29791 11.8188 1.76015 11.8387C1.77892 11.8405 1.79784 11.8414 1.81692 11.8414H2.14212V17.8453C2.14212 19.0334 3.10886 20 4.29733 20H7.48949C7.81301 20 8.07549 19.7377 8.07549 19.4141V14.707C8.07549 14.1649 8.51651 13.7239 9.05871 13.7239H10.9415C11.4837 13.7239 11.9248 14.1649 11.9248 14.707V19.4141C11.9248 19.7377 12.1871 20 12.5108 20H15.7029C16.8914 20 17.8581 19.0334 17.8581 17.8453V11.8414H18.1597C18.6514 11.8414 19.1138 11.6499 19.4618 11.302C20.1791 10.5844 20.1794 9.41711 19.4628 8.69904Z"
                fill="#575C69"
              />
            </svg>
            Главная
          </NavLink>
          <NavLink
            to="/courses"
            activeStyle={{
              background: 'white',
            }}>
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <g clipPath="url(#clip0)">
                <path
                  d="M5.33323 4.33359V3.00029C5.33323 2.81621 5.18398 2.66696 4.9999 2.66696H0.333327C0.149248 2.66696 0 2.81621 0 3.00029V4.33359H5.33323Z"
                  fill="#575C69"
                />
                <path
                  d="M0 5.00027V16.0001H5.33323V5.00027H0ZM3.99992 9.33352H1.33331C1.14923 9.33352 0.99998 9.18427 0.99998 9.00019V6.33358C0.99998 6.1495 1.14923 6.00025 1.33331 6.00025H3.99992C4.184 6.00025 4.33325 6.1495 4.33325 6.33358V9.00019C4.33325 9.18427 4.184 9.33352 3.99992 9.33352Z"
                  fill="#575C69"
                />
                <path
                  d="M0 18V19.6666C0 19.8507 0.149248 20 0.333327 20H4.9999C5.18398 20 5.33323 19.8507 5.33323 19.6666V18H0Z"
                  fill="#575C69"
                />
                <path d="M0 16.6667H5.33323V17.3333H0V16.6667Z" fill="#575C69" />
                <path d="M6 16.6667H10.3332V17.3333H6V16.6667Z" fill="#575C69" />
                <path
                  d="M10.3332 1.33367V0.333693C10.3332 0.149615 10.184 0.000366211 9.99992 0.000366211H6.33333C6.14925 0.000366211 6 0.149615 6 0.333693V1.33367H10.3332Z"
                  fill="#575C69"
                />
                <path d="M6 3.66696H10.3332V16H6V3.66696Z" fill="#575C69" />
                <path
                  d="M6 18V19.6666C6 19.8507 6.14925 20 6.33333 20H9.99992C10.184 20 10.3332 19.8507 10.3332 19.6666V18H6Z"
                  fill="#575C69"
                />
                <path d="M6 2.00034H10.3332V3.00032H6V2.00034Z" fill="#575C69" />
                <path
                  d="M10.9912 6.90289L11.1696 7.58761L16.8147 6.08227L16.6361 5.39755L10.9912 6.90289Z"
                  fill="#575C69"
                />
                <path
                  d="M13.7767 17.5811L19.4216 16.0757L19.0642 14.7055L13.4189 16.2108L13.7767 17.5811Z"
                  fill="#575C69"
                />
                <path
                  d="M18.897 14.0605L16.9841 6.72726L11.3389 8.23261L13.2518 15.5658L18.897 14.0605Z"
                  fill="#575C69"
                />
                <path
                  d="M10.8229 6.25787L16.4677 4.75269L15.9891 2.91695C15.9398 2.73922 15.7582 2.63294 15.5792 2.67705L10.5793 4.01036C10.4027 4.05869 10.2974 4.23952 10.3425 4.41692L10.8229 6.25787Z"
                  fill="#575C69"
                />
                <path
                  d="M19.5905 16.7207L13.9453 18.2261L14.3429 19.75C14.366 19.8359 14.4224 19.9091 14.4997 19.9534C14.55 19.9838 14.6076 20 14.6663 20C14.6955 20 14.7246 19.9965 14.7529 19.99L19.7528 18.6567C19.9294 18.6084 20.0347 18.4274 19.9896 18.25L19.5905 16.7207Z"
                  fill="#575C69"
                />
              </g>
              <defs>
                <clipPath id="clip0">
                  <rect width="20" height="20" fill="white" />
                </clipPath>
              </defs>
            </svg>
            Курсы
          </NavLink>
          <NavLink
            to="/grades"
            activeStyle={{
              background: 'white',
            }}>
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <g clipPath="url(#clip0)">
                <path
                  d="M19.9713 7.70533C19.9024 7.49319 19.7191 7.33858 19.4984 7.30655L13.2983 6.40557L10.5254 0.787355C10.4268 0.587355 10.223 0.460754 10 0.460754C9.77699 0.460754 9.57332 0.587355 9.47461 0.787355L6.70165 6.40557L0.501673 7.30655C0.281009 7.33858 0.0976117 7.49319 0.0287057 7.7053C-0.0402394 7.91744 0.0172604 8.15029 0.176986 8.30596L4.66322 12.6791L3.60432 18.8542C3.56658 19.0741 3.65697 19.2962 3.8374 19.4273C3.93947 19.5015 4.06037 19.5392 4.18185 19.5392C4.27513 19.5392 4.36873 19.517 4.45443 19.4719L10 16.5564L15.5453 19.4718C15.7428 19.5756 15.982 19.5584 16.1624 19.4273C16.3428 19.2962 16.4333 19.074 16.3956 18.8542L15.3363 12.6791L19.823 8.30592C19.9827 8.15029 20.0403 7.91744 19.9713 7.70533Z"
                  fill="#575C69"
                />
              </g>
              <defs>
                <clipPath id="clip0">
                  <rect width="20" height="20" fill="white" />
                </clipPath>
              </defs>
            </svg>
            Оценки
          </NavLink>
        </nav>
        <div className="userInfo">
          <span className="userName">{firstName ? firstName + ' ' + lastName : 'undefind'}</span>
          <span>ІПЗР-17к</span>
          <span>4 курс</span>
          <span className="exitAcc" onClick={this.logOut}>
            Выйти
          </span>
        </div>
      </div>
    );
  }
}

function mapStateToProps(state) {
  const { user } = state.auth;
  return {
    user,
  };
}

export default connect(mapStateToProps)(Sidebar);
